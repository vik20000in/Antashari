<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Audio Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f0f0f0;
    }
    .test-item {
      background: white;
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    audio {
      width: 100%;
      margin-top: 10px;
    }
    .status {
      margin-top: 10px;
      padding: 8px;
      border-radius: 4px;
      font-size: 14px;
    }
    .loading { background: #fff3cd; color: #856404; }
    .ready { background: #d4edda; color: #155724; }
    .error { background: #f8d7da; color: #721c24; }
    button {
      background: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover { background: #0056b3; }
  </style>
</head>
<body>
  <h1>üéµ Audio URL Test</h1>
  <p>Testing the audio URLs used in the Tune Challenge:</p>

  <div id="testContainer"></div>

  <script src="musicConfig.js"></script>
  <script>
    const testContainer = document.getElementById('testContainer');
    
    // Test songs: 5, 14, 26, 31
    const testSongIds = [5, 14, 26, 31];
    
    testSongIds.forEach(songId => {
      const config = getMusicForSong(songId);
      if (!config) {
        console.log(`No config for song ${songId}`);
        return;
      }
      
      const testItem = document.createElement('div');
      testItem.className = 'test-item';
      testItem.innerHTML = `
        <h3>Song ID: ${songId} - ${config.title}</h3>
        <audio controls preload="auto" crossorigin="anonymous">
          <source src="${config.audioUrl}">
        </audio>
        <div class="status loading" id="status-${songId}">‚è≥ Loading...</div>
        <button onclick="testPlay(${songId})">‚ñ∂Ô∏è Test Play</button>
      `;
      testContainer.appendChild(testItem);
      
      const audio = testItem.querySelector('audio');
      const status = document.getElementById(`status-${songId}`);
      
      audio.addEventListener('canplay', () => {
        status.className = 'status ready';
        status.textContent = '‚úì Ready to play! (Ready State: ' + audio.readyState + ')';
      });
      
      audio.addEventListener('error', (e) => {
        status.className = 'status error';
        status.textContent = '‚úó Error loading audio: ' + (audio.error ? audio.error.message : 'Unknown error');
      });
      
      audio.addEventListener('loadedmetadata', () => {
        console.log(`Song ${songId} metadata loaded`);
      });
    });
    
    function testPlay(songId) {
      const audio = document.querySelector(`#testContainer .test-item:nth-child(${testSongIds.indexOf(songId) + 1}) audio`);
      const status = document.getElementById(`status-${songId}`);
      
      audio.play()
        .then(() => {
          status.className = 'status ready';
          status.textContent = '‚ñ∂Ô∏è Playing! Ready State: ' + audio.readyState;
        })
        .catch(err => {
          status.className = 'status error';
          status.textContent = '‚úó Play failed: ' + err.message;
        });
    }
  </script>
</body>
</html>
